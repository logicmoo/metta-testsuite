<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"
>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"
>
<title></title>
<style type="text/css"
>
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi31 { color: #aa0000; }
.ansi32 { color: #00aa00; }
.ansi33 { color: #aa5500; }
.ansi36 { color: #00aaaa; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-013099040 { color: #0D6328; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-013099040 { color: #0D6328; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-013099040 { color: #0D6328; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-013099040 { color: #0D6328; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content"
>
Script started on 2025-02-15 18:44:58+00:00 [COMMAND="timeout --preserve-status --foreground 40 swipl -x /home/runner/work/metta-testsuite/metta-testsuite/prolog/metta_lang/Sav.fv-az1718-879.MeTTaLog   -- --python=enable -- --timeout=40 --output=/home/runner/work/metta-testsuite/metta-testsuite/reports/tests_output/baseline-compat --html --test tests/baseline_compat/hyperon-mettalog_sanity/recursive_tuple_list_perf_he_394.metta --halt=true  --stdin=tty --stdout=tty --stderr=tty" TERM="xterm-256color" TTY="/dev/pts/0" COLUMNS="-1" LINES="-1"]

; [ : user [load_metta_file &self tests/baseline_compat/hyperon-mettalog_sanity/recursive_tuple_list_perf_he_394.metta] ]

[stream_error [ : 31 [ : 129 1260 ] ] [syntax_error [unexpected_char )] "Unexpected end character: ')'"]]

<span class="ansi1 ansi31"
>ERROR: Unknown message: stream_error(31:129:1260,syntax_error(unexpected_char(')'),"Unexpected end character: ')'"))
</span>
[stream_error [ : 32 [ : 8 1269 ] ] [syntax_error [unexpected_char )] "Unexpected end character: ')'"]]

<span class="ansi1 ansi31"
>ERROR: Unknown message: stream_error(32:8:1269,syntax_error(unexpected_char(')'),"Unexpected end character: ')'"))
</span>
[stream_error [ : 47 [ : 119 1863 ] ] [syntax_error [unexpected_char )] "Unexpected end character: ')'"]]

<span class="ansi1 ansi31"
>ERROR: Unknown message: stream_error(47:119:1863,syntax_error(unexpected_char(')'),"Unexpected end character: ')'"))
</span>;;; Test File: Recursive Tuple/List Deconstruction Performance in MeTTa
;;; Bug Report: https://github.com/trueagi-io/hyperon-experimental/issues/394
;;; Issue Overview:
;;; Recursive deconstruction of tuples or lists in MeTTa has suboptimal performance, 
;;; particularly for deep recursion. This test measures performance for TupleCount, 
;;; ListCount, BuildTuple, and BuildList functions.
;;; Example 1: TupleCount Performance
;;; ---------------------------------
<span class="ansi38-255165000"
> (= (TupleCount $_9892)  
  (if 
    (== $_9892 ()) 0 
    (+ 1 
      (TupleCount (cdr-atom $_9892)))))
</span><span class="ansi38-013099040"
>!(assertEqualToResult (TupleCount (1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30)) (30))

</span>
;<h3 id="HYPERON-METTALOG-SANITY.RECURSIVE-TUPLE-LIST-PERF-HE-394.01"
>;; HYPERON-METTALOG-SANITY.RECURSIVE-TUPLE-LIST-PERF-HE-394.01</h3>
; 
; EVAL TEST
; took 0.043 secs. (43.29 milliseconds) 

!(assertEqualToResult (TupleCount (1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30)) (30))

<span class="ansi36"
>  [loonit_success 
    [equal_enough_for_test_renumbered_l strict_equals_allow_vn 
      (30) 
      (30)]]
</span>
Deterministic: <span class="ansi33"
>()
</span>;;; Explanation:
;;; Counts the elements in a tuple. Tests for 30 elements.
;;; Example 2: ListCount Performance
;;; ---------------------------------
<span class="ansi38-255165000"
> (= (ListCount Nil)  0)
</span><span class="ansi38-255165000"
> (= (ListCount (Cons $_162120 $_162126))  
  (+ 1 
    (ListCount $_162126)))
</span><span class="ansi38-013099040"
>!(assertEqualToResult (ListCount (Cons 1 (Cons 2 (Cons 3 (Cons 4 (Cons 5 (Cons 6 (Cons 7 (Cons 8 (Cons 9 (Cons 10 (Cons 11 (Cons 12 (Cons 13 (Cons 14 (Cons 15 (Cons 16 (Cons 17 (Cons 18 (Cons 19 (Cons 20 (Cons 21 (Cons 22 (Cons 23 (Cons 24 (Cons 25 (Cons 26 (Cons 27 (Cons 28 (Cons 29 (Cons 30 Nil))))))))))))))))))))))))))))))))

</span>
Deterministic: <span class="ansi33"
>(assertEqualToResult 30)
</span><span class="ansi38-255165000"
> (30)
</span>;;; Explanation:
;;; Counts the elements in a list represented as Cons cells. Tests for 30 elements.
;;; Example 3: BuildList Performance
;;; --------------------------------
<span class="ansi38-255165000"
> (= (BuildList $_150844 $_150850)  
  (if 
    (> $_150850 0) 
    (BuildList 
      (Cons 1 $_150844) 
      (- $_150850 1)) $_150844))
</span><span class="ansi38-013099040"
>!(assertEqualToResult (BuildList Nil 30) ((Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 Nil))))))))))))))))))))))))))))))))

</span>
;<h3 id="HYPERON-METTALOG-SANITY.RECURSIVE-TUPLE-LIST-PERF-HE-394.02"
>;; HYPERON-METTALOG-SANITY.RECURSIVE-TUPLE-LIST-PERF-HE-394.02</h3>
; 
; EVAL TEST
; took 2.62 seconds.

!(assertEqualToResult (BuildList Nil 30) ((Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 (Cons 1 Nil))))))))))))))))))))))))))))))))

<span class="ansi36"
>  [loonit_success 
    [equal_enough_for_test_renumbered_l strict_equals_allow_vn 
      ( (Cons 1 
          (Cons 1 
            (Cons 1 
              (Cons 1 
                (Cons 1 
                  (Cons 1 
                    (Cons 1 
                      (Cons 1 
                        (Cons 1 
                          (Cons 1 
                            (Cons 1 
                              (Cons 1 
                                (Cons 1 
                                  (Cons 1 
                                    (Cons 1 
                                      (Cons 1 
                                        (Cons 1 
                                          (Cons 1 
                                            (Cons 1 
                                              (Cons 1 
                                                (Cons 1 
                                                  (Cons 1 
                                                    (Cons 1 
                                                      (Cons 1 
                                                        (Cons 1 
                                                          (Cons 1 
                                                            (Cons 1 
                                                              (Cons 1 
                                                                (Cons 1 
                                                                  (Cons 1 Nil))))))))))))))))))))))))))))))) 
      ( (Cons 1 
          (Cons 1 
            (Cons 1 
              (Cons 1 
                (Cons 1 
                  (Cons 1 
                    (Cons 1 
                      (Cons 1 
                        (Cons 1 
                          (Cons 1 
                            (Cons 1 
                              (Cons 1 
                                (Cons 1 
                                  (Cons 1 
                                    (Cons 1 
                                      (Cons 1 
                                        (Cons 1 
                                          (Cons 1 
                                            (Cons 1 
                                              (Cons 1 
                                                (Cons 1 
                                                  (Cons 1 
                                                    (Cons 1 
                                                      (Cons 1 
                                                        (Cons 1 
                                                          (Cons 1 
                                                            (Cons 1 
                                                              (Cons 1 
                                                                (Cons 1 
                                                                  (Cons 1 Nil)))))))))))))))))))))))))))))))]]
</span>
Deterministic: <span class="ansi33"
>()
</span>;;; Explanation:
;;; Constructs a list of 30 elements using Cons.
;;; Example 4: BuildTuple Performance
;;; ---------------------------------
<span class="ansi38-255165000"
> (= (BuildTuple $_144096 $_144102)  
  (if 
    (> $_144102 0) 
    (BuildTuple 
      (1 $_144096) 
      (- $_144102 1)) $_144096))
</span><span class="ansi38-013099040"
>!(assertEqualToResult (BuildTuple () 30) (1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1))

</span>
;<h3 id="HYPERON-METTALOG-SANITY.RECURSIVE-TUPLE-LIST-PERF-HE-394.03"
>;; HYPERON-METTALOG-SANITY.RECURSIVE-TUPLE-LIST-PERF-HE-394.03</h3>
; 
; EVAL TEST
; took 0.489 secs. (488.88 milliseconds) 

!(assertEqualToResult (BuildTuple () 30) (1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1))

<span class="ansi31"
>  [loonit_failureR 
    [equal_enough_for_test_renumbered_l strict_equals_allow_vn 
      ( (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 ()))))))))))))))))))))))))))))))) 
      (1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1)]]
</span>equal_enough_for_test_renumbered_l(strict_equals_allow_vn,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'('[|]'(1,'[|]'([],[])),[])),[])),[])),[])),[])),[])),[])),[])),[])),[])),[])),[])),[])),[])),[])),[])),[])),[])),[])),[])),[])),[])),[])),[])),[])),[])),[])),[])),[])),[]),'[|]'(1,'[|]'(1,'[|]'(1,'[|]'(1,'[|]'(1,'[|]'(1,'[|]'(1,'[|]'(1,'[|]'(1,'[|]'(1,'[|]'(1,'[|]'(1,'[|]'(1,'[|]'(1,'[|]'(1,'[|]'(1,'[|]'(1,'[|]'(1,'[|]'(1,'[|]'(1,'[|]'(1,'[|]'(1,'[|]'(1,'[|]'(1,'[|]'(1,'[|]'(1,'[|]'(1,'[|]'(1,'[|]'(1,'[|]'(1,[])))))))))))))))))))))))))))))))

Deterministic: <span class="ansi33"
>(Error ('~nGot: ' ((1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 ())))))))))))))))))))))))))))))))) ('~nExpected: ' (1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1)))
</span>;;; Explanation:
;;; Constructs a tuple of 30 elements.
;;; Summary:
;;; - These tests validate the correctness of TupleCount, ListCount, BuildList, and BuildTuple functions.
;;; - They also serve as a baseline for measuring performance, particularly for recursion depth.
<span class="ansi1"
>LoonIt Report
</span>------------
<span class="ansi32"
>Successes: 2
</span><span class="ansi31"
>Failures: 1
</span><br/> <a href="#" onclick="window.history.back(); return false;"
>Return to summaries</a><br/>
[()]
[(assertEqualToResult 30)]
[()]
[(Error ('~nGot: ' ((1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 (1 ())))))))))))))))))))))))))))))))) ('~nExpected: ' (1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1)))]

Script done on 2025-02-15 18:45:03+00:00 [COMMAND_EXIT_CODE="7"]

</pre>
</body>

</html>
\033[0;32mCompleted successfully (EXITCODE=7) Under 40 seconds: /home/runner/work/metta-testsuite/metta-testsuite/mettalog '--output=/home/runner/work/metta-testsuite/metta-testsuite/reports/tests_output/baseline-compat' --timeout=40 --html --repl=false  --test "tests/baseline_compat/hyperon-mettalog_sanity/recursive_tuple_list_perf_he_394.metta" --halt=true\033[0m
